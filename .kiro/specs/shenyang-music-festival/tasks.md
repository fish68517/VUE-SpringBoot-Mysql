# 沈阳音乐节管理系统 - 实现计划

## 第一阶段：项目初始化与基础框架

- [x] 1. 初始化 Spring Boot 后端项目





  - 创建 Spring Boot 3.x 项目结构
  - 配置 Maven 依赖（Spring Web、JPA、MySQL、Lombok）
  - 配置 application.yml（数据库连接、JPA 配置、日志级别）
  - 创建项目的分层目录结构（controller、service、repository、entity、dto、util）
  - _需求: 1.1, 1.2_

- [x] 2. 初始化 Vue3 前端项目





  - 使用 Vite 创建 Vue3 项目
  - 安装依赖（Vue Router、Pinia、Element Plus、Axios、ECharts）
  - 配置 Vite 代理和环境变量
  - 创建项目目录结构（components、pages、stores、api、utils）
  - _需求: 3.1_

- [x] 3. 配置数据库与创建数据表





  - 创建 MySQL 数据库
  - 编写 SQL 脚本创建所有数据表（User、Ticket、Product、Order 等）
  - 配置表的索引和约束（唯一约束、外键约束）
  - _需求: 1.2, 5.1_

- [x] 4. 实现 JWT 认证框架





  - 创建 JWT Token 生成和验证工具类
  - 实现自定义认证拦截器（验证 Token 有效性）
  - 配置请求拦截器处理认证失败情况
  - _需求: 1.1_

## 第二阶段：用户认证与权限管理

- [x] 5. 实现用户注册与登录接口





  - 创建 User Entity 和 UserRepository
  - 实现 UserService 的注册方法（密码加密、数据验证）
  - 实现 UserService 的登录方法（密码验证、Token 生成）
  - 创建 UserController 的 /register 和 /login 端点
  - _需求: 1.1_


- [x] 7. 实现用户信息管理接口





  - 创建 /profile GET 端点（获取用户信息）
  - 创建 /profile PUT 端点（更新用户信息）
  - 创建 /avatar POST 端点（上传头像）
  - 实现身份证号脱敏显示逻辑
  - _需求: 1.2_

- [x] 8. 实现实名认证接口





  - 创建 /real-name POST 端点（提交实名认证）
  - 创建 /real-name GET 端点（获取认证状态）
  - 实现认证状态验证逻辑
  - _需求: 1.2_

- [x] 9. 前端实现登录注册页面





  - 创建登录页面（账号密码登录、手机号验证码登录）
  - 创建注册页面（表单验证、密码强度检查）
  - 实现 Axios 拦截器处理 Token 存储和请求头
  - 实现路由守卫（未登录重定向到登录页）
  - _需求: 1.1_

- [x] 10. 前端实现个人中心页面





  - 创建个人信息编辑页面
  - 创建实名认证页面
  - 创建收货地址管理页面
  - 使用 Pinia 存储用户信息
  - _需求: 1.2_

## 第三阶段：音乐节信息展示

- [x] 11. 实现音乐节基本信息接口





  - 创建 Festival Entity 和 FestivalRepository
  - 创建 /festival/info GET 端点
  - 创建 /festival/schedule GET 端点（演出日程）
  - _需求: 3.1_

- [x] 12. 实现艺人信息接口





  - 创建 Artist Entity 和 ArtistRepository
  - 创建 /artists GET 端点（艺人列表）
  - 创建 /artists/:id GET 端点（艺人详情）
  - 实现沈阳本土乐队标注逻辑
  - _需求: 3.1_

- [ ] 13. 实现天气信息接口
  - 集成天气 API（中国天气网或心知天气）
  - 创建 /weather GET 端点
  - 实现天气数据缓存（减少 API 调用）
  - _需求: 4.1_

- [ ] 14. 实现交通信息接口
  - 创建 TransportInfo Entity
  - 创建 /transport GET 端点
  - 创建 /transport/guide GET 端点（入场须知、防疫要求）
  - _需求: 4.1_

- [x] 15. 前端实现首页展示





  - 创建首页组件（轮播图、倒计时、艺人列表）
  - 实现倒计时逻辑（天、小时、分钟、秒）
  - 创建艺人详情页面
  - _需求: 3.1_

- [ ] 16. 前端实现天气和交通页面
  - 创建天气展示页面（逐日预报、穿衣建议）
  - 创建交通指南页面（地铁、公交、停车攻略）
  - _需求: 4.1_

## 第四阶段：购票系统

- [x] 17. 实现票务基础数据接口





  - 创建 TicketSession 和 TicketZone Entity
  - 创建 /tickets/sessions GET 端点
  - 创建 /tickets/zones GET 端点
  - 创建 /tickets/zones/:id GET 端点（库存、价格）
  - _需求: 5.1_

- [ ] 18. 实现防黄牛检查接口
  - 创建 /tickets/check-id POST 端点
  - 实现同一身份证号限购一张票的逻辑
  - 返回购票状态（已购/未购）
  - _需求: 5.1_

- [x] 19. 实现购票订单创建接口





  - 创建 Ticket Entity 和 TicketRepository
  - 创建 /tickets/order POST 端点
  - 实现库存扣减逻辑
  - 实现一人代购最多 4 人的逻辑
  - _需求: 5.1, 6.1_

- [ ] 20. 实现电子票生成接口
  - 创建 /tickets/:id/pdf GET 端点
  - 实现二维码生成逻辑
  - 使用 html2canvas 或 pdf-make 生成 PDF
  - _需求: 6.1_

- [ ] 21. 实现我的电子票接口
  - 创建 /tickets/my-tickets GET 端点
  - 返回用户所有电子票列表
  - _需求: 6.1_

- [x] 22. 前端实现购票流程页面





  - 创建场次选择页面
  - 创建分区选择页面（显示剩余票量、价格）
  - 创建购票人信息填写页面（支持一人代购多人）
  - 创建支付模拟页面
  - _需求: 5.1, 6.1_

- [ ] 23. 前端实现我的电子票页面
  - 创建电子票列表页面
  - 实现二维码显示
  - 实现 PDF 下载功能
  - _需求: 6.1_

## 第五阶段：商品与购物车系统

- [x] 24. 实现商品基础接口





  - 创建 Product、ProductCategory Entity
  - 创建 /products GET 端点（分页、分类筛选）
  - 创建 /products/:id GET 端点
  - 创建 /products/categories GET 端点
  - _需求: 7.1_

- [x] 25. 实现购物车接口





  - 创建 Cart Entity（或使用 Session 存储）
  - 创建 /cart/add POST 端点
  - 创建 /cart GET 端点
  - 创建 /cart/:id DELETE 端点
  - _需求: 7.1_

- [x] 26. 实现商品订单接口





  - 创建 Order 和 OrderItem Entity
  - 创建 /orders/product POST 端点
  - 实现库存扣减逻辑
  - 实现订单状态管理（已支付、已发货、已完成）
  - _需求: 7.1, 8.1_

- [x] 27. 实现我的订单接口





  - 创建 /orders/product GET 端点
  - 返回用户所有商品订单
  - 支持按状态筛选
  - _需求: 8.1_

- [x] 28. 前端实现商城页面





  - 创建商品列表页面（分类、搜索、分页）
  - 创建商品详情页面（多图、规格选择、价格）
  - 实现加入购物车功能
  - _需求: 7.1_

- [x] 29. 前端实现购物车页面





  - 创建购物车列表页面
  - 实现数量修改、删除功能
  - 实现总价计算
  - _需求: 7.1_

- [x] 30. 前端实现订单结算页面





  - 创建收货地址填写页面
  - 创建支付模拟页面
  - 创建订单确认页面
  - _需求: 7.1, 8.1_

- [x] 31. 前端实现我的订单页面




  - 创建订单列表页面（票务、商品、积分兑换）
  - 创建订单详情页面
  - 实现物流追踪显示
  - _需求: 8.1_


## 第六阶段：打卡任务与积分系统

- [ ] 32. 实现打卡任务接口
  - 创建 CheckinTask Entity 和 CheckinTaskRepository
  - 创建 /checkins/tasks GET 端点
  - 创建 /checkins/tasks/:id GET 端点
  - _需求: 11.1_

- [ ] 33. 实现地理位置验证接口
  - 创建 /checkins/verify-location POST 端点
  - 实现地理围栏验证逻辑（计算距离）
  - 返回位置验证结果
  - _需求: 11.1_

- [ ] 34. 实现打卡记录提交接口
  - 创建 CheckinRecord Entity 和 CheckinRecordRepository
  - 创建 /checkins/submit POST 端点
  - 实现照片上传逻辑
  - 实现打卡记录保存（待审核状态）
  - _需求: 11.1_

- [ ] 35. 实现我的打卡记录接口
  - 创建 /checkins/my-records GET 端点
  - 返回用户所有打卡记录
  - 支持按状态筛选
  - _需求: 11.1_

- [ ] 36. 实现积分余额接口
  - 创建 PointsHistory Entity 和 PointsHistoryRepository
  - 创建 /points/balance GET 端点
  - 返回用户当前积分余额
  - _需求: 12.1_

- [ ] 37. 实现积分流水接口
  - 创建 /points/history GET 端点
  - 支持按用户、时间、任务类型筛选
  - 返回积分变动记录
  - _需求: 19.1_

- [ ] 38. 前端实现打卡任务页面
  - 创建打卡任务列表页面
  - 创建任务详情页面
  - 实现位置验证逻辑（调用地理位置 API）
  - 实现照片上传功能
  - _需求: 11.1_

- [ ] 39. 前端实现打卡记录页面
  - 创建打卡记录列表页面
  - 显示审核状态
  - 显示获得的积分
  - _需求: 11.1_

- [ ] 40. 前端实现积分展示
  - 在个人中心显示积分余额
  - 创建积分流水查询页面
  - _需求: 12.1_

## 第七阶段：积分商城与兑换系统

- [ ] 41. 实现积分商城商品接口
  - 创建 PointsMall Entity 和 PointsMallRepository
  - 创建 /points/mall GET 端点
  - 返回所有可兑换商品（实体、虚拟）
  - _需求: 12.1_

- [ ] 42. 实现积分兑换接口
  - 创建 PointsExchange Entity 和 PointsExchangeRepository
  - 创建 /points/exchange POST 端点
  - 实现积分足额检查
  - 实现兑换申请保存（待审核状态）
  - _需求: 12.1_

- [ ] 43. 实现我的兑换订单接口
  - 创建 /points/exchange-orders GET 端点
  - 返回用户所有兑换订单
  - 支持按状态筛选
  - _需求: 12.1_

- [ ] 44. 前端实现积分商城页面
  - 创建商品列表页面（实体、虚拟分类）
  - 显示所需积分、库存、倒计时
  - 创建商品详情页面
  - _需求: 12.1_

- [ ] 45. 前端实现兑换流程页面
  - 创建兑换确认页面
  - 实现地址填写（实体商品）
  - 创建兑换成功页面
  - _需求: 12.1_

- [ ] 46. 前端实现兑换记录页面
  - 创建兑换订单列表页面
  - 显示订单状态和物流信息
  - _需求: 12.1_

## 第八阶段：内容管理与用户互动

- [ ] 47. 实现文章接口
  - 创建 Article Entity 和 ArticleRepository
  - 创建 /articles GET 端点（分页、分类筛选）
  - 创建 /articles/:id GET 端点
  - _需求: 9.1_

- [ ] 48. 实现用户互动接口
  - 创建 ArticleComment Entity
  - 创建 /articles/:id/like POST 端点
  - 创建 /articles/:id/collect POST 端点
  - 创建 /articles/:id/comment POST 端点
  - 创建 /articles/:id/comments GET 端点
  - _需求: 10.1_

- [ ] 49. 实现音乐节关注接口
  - 创建 FestivalFollow Entity
  - 创建 /festival/follow POST 端点
  - 创建 /festival/followers GET 端点
  - _需求: 10.1_

- [ ] 50. 前端实现资讯页面
  - 创建文章列表页面（分类、搜索）
  - 创建文章详情页面
  - 实现点赞、收藏、评论功能
  - _需求: 9.1, 10.1_

- [ ] 51. 前端实现我的收藏页面
  - 创建收藏列表页面
  - 实现取消收藏功能
  - _需求: 10.1_

## 第九阶段：后台管理系统 - 仪表盘与用户管理

- [ ] 52. 实现仪表盘数据接口
  - 创建 /admin/dashboard GET 端点
  - 实现订单趋势数据查询（今日、7 日、30 日）
  - 实现用户增长曲线数据
  - 实现分区售票热力图数据
  - 实现商品销量排行数据
  - 实现打卡任务统计数据
  - _需求: 13.1_

- [ ] 53. 实现用户管理接口
  - 创建 /admin/users GET 端点（搜索、分页、导出 Excel）
  - 创建 /admin/users/:id GET 端点（用户详情）
  - 创建 /admin/users/:id/ban PUT 端点（封禁/解封）
  - 创建 /admin/users/:id/points PUT 端点（调整积分）
  - _需求: 14.1_

- [ ] 54. 前端实现仪表盘页面
  - 创建仪表盘组件（使用 ECharts）
  - 实现订单趋势图
  - 实现用户增长曲线
  - 实现分区售票热力图
  - 实现商品销量排行
  - 实现打卡统计
  - _需求: 13.1_

- [ ] 55. 前端实现用户管理页面
  - 创建用户列表页面（搜索、分页）
  - 创建用户详情页面
  - 实现封禁/解封功能
  - 实现积分调整功能
  - 实现导出 Excel 功能
  - _需求: 14.1_

## 第十阶段：后台管理系统 - 票务与商品管理

- [ ] 56. 实现票务管理接口
  - 创建 /admin/tickets/sessions POST 端点（创建场次）
  - 创建 /admin/tickets/sessions PUT 端点（编辑场次）
  - 创建 /admin/tickets/zones POST 端点（创建分区）
  - 创建 /admin/tickets/zones/:id PUT 端点（编辑分区、设置库存、价格）
  - 创建 /admin/tickets/orders GET 端点（订单列表、筛选、导出）
  - _需求: 15.1_

- [ ] 57. 实现商品管理接口
  - 创建 /admin/products POST 端点（创建商品）
  - 创建 /admin/products/:id PUT 端点（编辑商品）
  - 创建 /admin/products/:id DELETE 端点（删除商品）
  - 创建 /admin/products GET 端点（商品列表、库存预警）
  - _需求: 16.1_

- [ ] 58. 实现订单管理接口
  - 创建 /admin/orders/product GET 端点（商品订单列表）
  - 创建 /admin/orders/:id PUT 端点（更新物流单号、发货状态）
  - 实现订单导出 Excel 功能
  - _需求: 15.1, 16.1_

- [ ] 59. 前端实现票务管理页面
  - 创建场次管理页面（新增、编辑）
  - 创建分区管理页面（库存设置、价格设置）
  - 创建票务订单列表页面（筛选、导出）
  - _需求: 15.1_

- [ ] 60. 前端实现商品管理页面
  - 创建商品列表页面（上下架、库存预警）
  - 创建商品编辑页面（多图上传、规格管理）
  - 创建商品订单列表页面（物流管理、导出）
  - _需求: 16.1_

## 第十一阶段：后台管理系统 - 内容与打卡管理

- [ ] 61. 实现内容管理接口
  - 创建 /admin/articles POST 端点（发布文章）
  - 创建 /admin/articles/:id PUT 端点（编辑文章）
  - 创建 /admin/articles/:id DELETE 端点（删除文章）
  - 创建 /admin/articles GET 端点（文章列表）
  - _需求: 9.1_

- [ ] 62. 实现打卡审核接口
  - 创建 /admin/checkins/records GET 端点（打卡记录列表）
  - 创建 /admin/checkins/:id PUT 端点（审核打卡、通过/拒绝）
  - 实现自动加积分逻辑（审核通过时）
  - _需求: 11.1, 17.1_

- [ ] 63. 前端实现内容管理页面
  - 创建文章发布页面（富文本编辑、多图上传）
  - 创建文章列表页面（编辑、删除）
  - _需求: 9.1_

- [ ] 64. 前端实现打卡审核页面
  - 创建打卡记录列表页面（照片预览）
  - 实现批量审核功能（通过/拒绝）
  - 实现拒绝原因填写
  - _需求: 17.1_

## 第十二阶段：后台管理系统 - 积分管理

- [ ] 65. 实现积分商城管理接口
  - 创建 /admin/points/mall POST 端点（创建商品）
  - 创建 /admin/points/mall/:id PUT 端点（编辑商品）
  - 创建 /admin/points/mall/:id DELETE 端点（删除商品）
  - 创建 /admin/points/mall GET 端点（商品列表）
  - _需求: 18.1_

- [ ] 66. 实现兑换审核接口
  - 创建 /admin/points/exchange GET 端点（兑换订单列表）
  - 创建 /admin/points/exchange/:id PUT 端点（审核兑换、扣积分、发放权益）
  - 实现物流单号填写逻辑
  - _需求: 18.1_

- [ ] 67. 实现用户积分管理接口
  - 创建 /admin/users/:id/points PUT 端点（手动调整积分）
  - 创建 /admin/users/:id/freeze-points PUT 端点（冻结积分）
  - 实现操作日志记录
  - _需求: 14.1, 19.1_

- [ ] 68. 前端实现积分商城管理页面
  - 创建商品列表页面（上下架、库存管理）
  - 创建商品编辑页面（实体/虚拟类型、积分价格）
  - _需求: 18.1_

- [ ] 69. 前端实现兑换审核页面
  - 创建兑换订单列表页面（筛选、搜索）
  - 创建审核详情页面（通过/拒绝、物流单号）
  - _需求: 18.1_

- [ ] 70. 前端实现积分流水查询页面
  - 创建流水列表页面（按用户、时间、类型筛选）
  - 实现导出 Excel 功能
  - _需求: 19.1_

## 第十三阶段：系统集成与优化

- [ ] 71. 实现全局异常处理
  - 创建统一的异常处理器（@ControllerAdvice）
  - 实现业务异常处理（防黄牛、库存不足、积分不足等）
  - 实现统一的错误响应格式
  - _需求: 1.1, 5.1, 12.1_

- [ ] 72. 实现数据库索引优化
  - 在 userId、idNumber、sessionId、zoneId 等字段上创建索引
  - 在 createdAt、status 等常用筛选字段上创建索引
  - _需求: 所有需求_

- [ ] 73. 实现 API 请求拦截器
  - 前端 Axios 拦截器（Token 处理、错误处理）
  - 后端请求拦截器（认证验证、日志记录）
  - _需求: 1.1_

- [ ] 74. 实现数据缓存策略
  - 缓存艺人列表、商品列表等热点数据
  - 缓存天气信息（减少 API 调用）
  - _需求: 3.1, 4.1_


## 第十四阶段：测试与验证

- [ ]* 76. 编写后端单元测试
  - 测试 UserService（注册、登录、实名认证）
  - 测试 TicketService（防黄牛、库存扣减）
  - 测试 PointsService（积分计算、兑换）
  - 测试 CheckinService（地理围栏验证）
  - _需求: 1.1, 5.1, 11.1, 12.1_

- [ ]* 77. 编写后端集成测试
  - 测试完整的购票流程
  - 测试完整的打卡流程
  - 测试完整的兑换流程
  - _需求: 5.1, 11.1, 12.1_

- [ ]* 78. 编写前端组件测试
  - 测试登录表单验证
  - 测试购物车计算逻辑
  - 测试积分显示
  - _需求: 1.1, 7.1, 12.1_

- [ ]* 79. 执行系统集成测试
  - 测试前后端通信
  - 测试完整的用户流程（注册 → 购票 → 打卡 → 兑换）
  - 测试管理员操作流程
  - _需求: 所有需求_

- [ ]* 80. 性能测试与优化
  - 测试数据库查询性能
  - 测试 API 响应时间
  - 优化慢查询
  - _需求: 所有需求_

## 第十五阶段：部署与文档

- [ ] 81. 编写 API 文档
  - 使用 Swagger/OpenAPI 生成 API 文档
  - 配置 Springfox 或 Springdoc-openapi
  - _需求: 所有需求_

- [ ] 82. 编写部署指南
  - 编写后端部署说明（Docker、服务器配置）
  - 编写前端部署说明（构建、CDN 配置）
  - 编写数据库初始化脚本
  - _需求: 所有需求_

- [ ] 83. 编写用户手册
  - 编写用户端使用说明
  - 编写管理员操作手册
  - _需求: 所有需求_
