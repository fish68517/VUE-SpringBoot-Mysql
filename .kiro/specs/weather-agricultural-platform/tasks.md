# 实现计划

## 项目初始化与基础设置

- [x] 1. 创建SpringBoot 3.x项目结构和配置







  - 使用Maven创建SpringBoot 3.x项目
  - 配置application.yml文件（数据库连接、日志、端口等）
  - 添加必要的依赖：spring-boot-starter-web、spring-boot-starter-data-jpa、mysql-connector-java、spring-boot-starter-security
  - 创建项目的包结构：controller、service、repository、entity、dto、util、config
  - _需求: 1.1, 2.1, 3.1_

- [x] 2. 配置MySQL数据库和创建数据表





  - 创建MySQL数据库和用户
  - 编写SQL脚本创建所有数据表（users、weather_data、warnings、agricultural_products、crops、recommendations、orders）
  - 为每张表添加5-6条中文模拟数据
  - 配置JPA实体映射
  - _需求: 1.1, 2.1, 3.1, 4.1, 5.1, 6.1, 7.1_

- [x] 3. 配置日志系统和工具类





  - 配置Logback日志框架
  - 创建统一的日志工具类
  - 创建统一的响应结果类（Result）
  - 创建统一的异常处理类和全局异常处理器
  - 创建常用的工具类（日期、字符串、加密等）
  - _需求: 1.1, 2.1, 3.1_

## 用户管理模块实现

- [x] 4. 创建用户实体和数据访问层





  - 创建User实体类，包含所有用户属性
  - 创建UserRepository接口，继承JpaRepository
  - 实现用户的基本CRUD操作
  - _需求: 5.1, 5.2, 5.3, 5.4_

- [x] 5. 实现用户业务逻辑层




  - 创建UserService类，实现用户注册、登录、查询、更新、删除功能
  - 实现密码加密存储（使用BCrypt）
  - 实现用户身份验证逻辑
  - 添加详细的中文注释和日志记录
  - _需求: 5.1, 5.2, 5.3, 5.4_

- [x] 6. 创建用户控制层接口




  - 创建UserController类
  - 实现用户注册接口：POST /api/users/register
  - 实现用户登录接口：POST /api/users/login
  - 实现获取用户信息接口：GET /api/users/{id}
  - 实现更新用户信息接口：PUT /api/users/{id}
  - 实现删除用户接口：DELETE /api/users/{id}
  - 添加请求参数验证和错误处理
  - _需求: 5.1, 5.2, 5.3, 5.4_

## 气象数据模块实现

- [x] 7. 创建气象数据实体和数据访问层





  - 创建WeatherData实体类
  - 创建WeatherDataRepository接口
  - 实现气象数据的查询功能（按地区、时间范围）
  - _需求: 1.1, 1.2, 1.3, 1.4_

- [x] 8. 实现气象数据业务逻辑层





  - 创建WeatherService类
  - 实现获取当前气象数据功能
  - 实现获取气象预报功能
  - 实现获取历史气象数据功能
  - 实现气象数据的存储和更新
  - 添加详细的中文注释和日志记录
  - _需求: 1.1, 1.2, 1.3, 1.4_

- [x] 9. 创建气象数据控制层接口





  - 创建WeatherController类
  - 实现获取当前气象数据接口：GET /api/weather/current
  - 实现获取气象预报接口：GET /api/weather/forecast
  - 实现获取历史气象数据接口：GET /api/weather/history
  - 实现按地区和时间范围查询接口
  - _需求: 1.1, 1.2, 1.3, 1.4_

## 预警管理模块实现

- [x] 10. 创建预警实体和数据访问层





  - 创建Warning实体类
  - 创建WarningRepository接口
  - 实现预警数据的查询功能（按地区、预警类型、状态）
  - _需求: 2.1, 2.2, 2.3, 2.4_

- [x] 11. 实现预警业务逻辑层





  - 创建WarningService类
  - 实现发布预警功能
  - 实现获取预警列表功能
  - 实现更新预警状态功能
  - 实现预警过期处理逻辑
  - 添加详细的中文注释和日志记录
  - _需求: 2.1, 2.2, 2.3, 2.4_

- [x] 12. 创建预警控制层接口





  - 创建WarningController类
  - 实现发布预警接口：POST /api/warnings
  - 实现获取预警列表接口：GET /api/warnings
  - 实现更新预警接口：PUT /api/warnings/{id}
  - 实现删除预警接口：DELETE /api/warnings/{id}
  - 实现按地区查询预警接口
  - _需求: 2.1, 2.2, 2.3, 2.4_

## 农资产品模块实现

- [x] 13. 创建农资产品实体和数据访问层





  - 创建AgriculturalProduct实体类
  - 创建ProductRepository接口
  - 实现产品的查询功能（按类别、商家、库存状态）
  - _需求: 3.1, 3.2, 3.3, 3.4_

- [x] 14. 实现农资产品业务逻辑层





  - 创建ProductService类
  - 实现添加产品功能
  - 实现获取产品列表功能
  - 实现更新产品信息功能
  - 实现删除产品功能
  - 实现库存管理逻辑
  - 添加详细的中文注释和日志记录
  - _需求: 3.1, 3.2, 3.3, 3.4_

- [x] 15. 创建农资产品控制层接口




  - 创建ProductController类
  - 实现添加产品接口：POST /api/products
  - 实现获取产品列表接口：GET /api/products
  - 实现更新产品接口：PUT /api/products/{id}
  - 实现删除产品接口：DELETE /api/products/{id}
  - 实现按类别查询接口
  - _需求: 3.1, 3.2, 3.3, 3.4_

## 作物管理模块实现

- [x] 16. 创建作物实体和数据访问层





  - 创建Crop实体类
  - 创建CropRepository接口
  - 实现作物的查询功能（按用户、地区、生育期）
  - _需求: 4.2_

- [x] 17. 实现作物业务逻辑层




  - 创建CropService类
  - 实现添加作物功能
  - 实现获取用户作物列表功能
  - 实现更新作物信息功能
  - 实现删除作物功能
  - 添加详细的中文注释和日志记录
  - _需求: 4.2_

- [x] 18. 创建作物控制层接口




  - 创建CropController类
  - 实现添加作物接口：POST /api/crops
  - 实现获取作物列表接口：GET /api/crops
  - 实现更新作物接口：PUT /api/crops/{id}
  - 实现删除作物接口：DELETE /api/crops/{id}
  - _需求: 4.2_

## 推荐引擎模块实现

- [x] 19. 创建推荐实体和数据访问层





  - 创建Recommendation实体类
  - 创建RecommendationRepository接口
  - 实现推荐数据的查询功能
  - _需求: 4.1, 4.2, 4.3, 4.4_

- [x] 20. 实现推荐引擎业务逻辑层





  - 创建RecommendationEngine类
  - 实现推荐规则引擎（根据预警类型和作物信息推荐农资）
  - 实现推荐优先级排序逻辑
  - 实现库存检查逻辑
  - 创建推荐规则配置（预警类型与农资的映射关系）
  - 添加详细的中文注释和日志记录
  - _需求: 4.1, 4.2, 4.3, 4.4_

- [x] 21. 创建推荐服务和控制层接口




  - 创建RecommendationService类
  - 创建RecommendationController类
  - 实现生成推荐接口：POST /api/recommendations
  - 实现获取推荐列表接口：GET /api/recommendations/{warningId}
  - 实现用户接受/拒绝推荐接口
  - _需求: 4.1, 4.2, 4.3, 4.4_

## 订单管理模块实现

- [x] 22. 创建订单实体和数据访问层





  - 创建Order实体类
  - 创建OrderRepository接口
  - 实现订单的查询功能（按用户、状态、时间范围）
  - _需求: 6.1, 6.2, 6.3, 6.4_

- [x] 23. 实现订单业务逻辑层





  - 创建OrderService类
  - 实现创建订单功能（包括库存扣减）
  - 实现获取订单列表功能
  - 实现更新订单状态功能
  - 实现订单支付处理逻辑
  - 实现订单发货处理逻辑
  - 添加详细的中文注释和日志记录
  - _需求: 6.1, 6.2, 6.3, 6.4_

- [x] 24. 创建订单控制层接口





  - 创建OrderController类
  - 实现创建订单接口：POST /api/orders
  - 实现获取订单列表接口：GET /api/orders
  - 实现获取订单详情接口：GET /api/orders/{id}
  - 实现更新订单状态接口：PUT /api/orders/{id}/status
  - 实现订单支付接口：POST /api/orders/{id}/pay
  - _需求: 6.1, 6.2, 6.3, 6.4_

## 数据分析与报表模块实现

- [x] 25. 创建数据分析业务逻辑层




  - 创建AnalyticsService类
  - 实现订单统计功能（按时间、地区、产品类别）
  - 实现预警统计功能
  - 实现用户统计功能
  - 实现产品销售排行功能
  - 添加详细的中文注释和日志记录
  - _需求: 7.1, 7.2, 7.3, 7.4_

- [x] 26. 创建数据分析控制层接口





  - 创建AnalyticsController类
  - 实现获取订单统计接口：GET /api/analytics/orders
  - 实现获取预警统计接口：GET /api/analytics/warnings
  - 实现获取用户统计接口：GET /api/analytics/users
  - 实现获取产品销售排行接口：GET /api/analytics/products/top
  - 实现数据导出接口：GET /api/analytics/export
  - _需求: 7.1, 7.2, 7.3, 7.4_

## 安全与认证模块实现

- [x] 27. 配置Spring Security和JWT认证





  - 配置Spring Security安全配置
  - 实现JWT令牌生成和验证
  - 创建JWT工具类
  - 实现用户认证过滤器
  - 配置CORS跨域资源共享
  - _需求: 5.1, 5.2, 5.3, 5.4_

- [-] 28. 实现权限控制和访问控制


  - 创建权限注解和拦截器
  - 实现基于角色的访问控制（RBAC）
  - 实现API接口的权限验证
  - 添加详细的中文注释和日志记录
  - _需求: 5.1, 5.2, 5.3, 5.4_

## 集成测试与系统验证

- [ ] 29. 编写集成测试
  - 测试用户注册和登录流程
  - 测试气象数据获取和预警发布流程
  - 测试农资推荐和订单创建流程
  - 测试完整的业务流程
  - _需求: 1.1, 2.1, 3.1, 4.1, 5.1, 6.1_

- [ ] 30. 系统功能验证和调试
  - 验证所有API接口的功能正确性
  - 验证数据库操作的一致性
  - 验证错误处理和异常捕获
  - 修复发现的问题和缺陷
  - _需求: 1.1, 2.1, 3.1, 4.1, 5.1, 6.1, 7.1_

## 前端集成与优化

- [ ] 31. 创建Vue前端项目结构
  - 创建Vue 3项目
  - 配置路由和状态管理
  - 创建API请求工具类
  - 创建公共组件库
  - _需求: 1.1, 2.1, 3.1, 4.1, 5.1, 6.1, 7.1_

- [ ] 32. 实现前端用户界面
  - 实现用户登录和注册页面
  - 实现用户信息管理页面
  - 实现气象数据展示页面
  - 实现预警信息展示页面
  - 实现农资产品浏览页面
  - 实现推荐列表展示页面
  - 实现订单管理页面
  - 实现数据分析报表页面
  - _需求: 1.1, 2.1, 3.1, 4.1, 5.1, 6.1, 7.1_

- [ ] 33. 前后端联调和优化
  - 验证前后端接口的数据一致性
  - 优化API响应性能
  - 修复前后端交互问题
  - 进行性能测试和优化
  - _需求: 1.1, 2.1, 3.1, 4.1, 5.1, 6.1, 7.1_

