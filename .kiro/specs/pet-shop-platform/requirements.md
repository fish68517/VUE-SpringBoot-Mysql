# 需求文档

## 简介

星落宠物用品销售网站系统是一个B2C宠物电商平台，集成了在线商城、宠物社区和多角色管理功能。系统支持三种用户角色：普通用户（购买者）、店家（商品提供者）和管理员（平台管理者）。系统提供商品浏览、购物车、订单管理、宠物档案管理、社区互动、店铺管理、数据统计等核心功能。

## 术语表

- **系统**：星落宠物用品销售网站系统
- **用户**：注册并使用平台购买商品的普通消费者
- **店家**：在平台上开设店铺并销售商品的商户
- **管理员**：负责平台运营和内容审核的管理人员
- **商品**：店家在平台上架销售的宠物用品
- **订单**：用户提交的购买请求，包含商品信息和支付状态
- **宠物档案**：用户为其宠物创建的信息记录
- **社区帖子**：用户在宠物社区发布的内容
- **购物车**：用户临时存储待购买商品的容器
- **优惠券**：店家发放的促销工具

## 需求

### 需求 1：用户注册与登录

**用户故事：** 作为一个新访客，我想要注册账号并登录系统，以便我可以使用平台的各项功能

#### 验收标准

1. WHEN 访客提交包含用户名、密码、邮箱和手机号的注册表单，THE 系统 SHALL 验证数据格式并创建新用户账户
2. WHEN 用户提交正确的用户名和密码，THE 系统 SHALL 验证凭证并返回登录成功状态
3. IF 用户提交的用户名已存在，THEN THE 系统 SHALL 返回错误提示"用户名已被使用"
4. WHEN 用户登录成功，THE 系统 SHALL 生成会话标识并返回用户基本信息

### 需求 2：用户资料管理

**用户故事：** 作为一个已登录用户，我想要查看和编辑我的个人资料，以便保持信息的准确性

#### 验收标准

1. WHEN 用户请求查看个人资料，THE 系统 SHALL 返回用户的昵称、邮箱、手机号、头像和地址信息
2. WHEN 用户提交修改后的资料，THE 系统 SHALL 验证数据格式并更新用户信息
3. WHEN 用户上传头像图片，THE 系统 SHALL 保存图片并更新用户头像URL

### 需求 3：宠物档案管理

**用户故事：** 作为一个宠物主人，我想要创建和管理我的宠物档案，以便获得个性化的商品推荐

#### 验收标准

1. WHEN 用户提交包含宠物名称、种类、年龄、性别的表单，THE 系统 SHALL 创建新的宠物档案
2. WHEN 用户请求查看宠物列表，THE 系统 SHALL 返回该用户所有宠物档案
3. WHEN 用户提交宠物档案修改，THE 系统 SHALL 更新对应宠物的信息
4. WHEN 用户请求删除宠物档案，THE 系统 SHALL 移除该宠物记录

### 需求 4：商品浏览与搜索

**用户故事：** 作为一个用户，我想要浏览和搜索商品，以便找到我需要的宠物用品

#### 验收标准

1. WHEN 用户访问商品列表页面，THE 系统 SHALL 返回分页的商品列表，包含商品名称、价格、图片和库存状态
2. WHEN 用户输入搜索关键词，THE 系统 SHALL 返回商品名称或描述中包含该关键词的商品列表
3. WHEN 用户选择商品分类，THE 系统 SHALL 返回该分类下的所有商品
4. WHEN 用户请求查看商品详情，THE 系统 SHALL 返回商品的完整信息，包括详细描述、规格、评价和店铺信息

### 需求 5：个性化推荐

**用户故事：** 作为一个用户，我想要看到个性化的商品推荐，以便更快找到适合我宠物的商品

#### 验收标准

1. WHEN 用户拥有宠物档案，THE 系统 SHALL 根据宠物种类推荐相关商品
2. WHEN 用户浏览商品，THE 系统 SHALL 记录浏览历史并推荐相似商品
3. WHEN 用户访问首页，THE 系统 SHALL 展示基于用户历史行为的推荐商品列表

### 需求 6：购物车管理

**用户故事：** 作为一个用户，我想要将商品加入购物车并管理购物车内容，以便批量购买商品

#### 验收标准

1. WHEN 用户选择商品并指定数量，THE 系统 SHALL 将商品添加到购物车
2. WHEN 用户请求查看购物车，THE 系统 SHALL 返回购物车中所有商品及其数量和小计金额
3. WHEN 用户修改购物车中商品数量，THE 系统 SHALL 更新对应商品的数量
4. WHEN 用户删除购物车中的商品，THE 系统 SHALL 移除该商品
5. IF 商品库存不足，THEN THE 系统 SHALL 在购物车中标记该商品为不可购买状态

### 需求 7：订单创建与管理

**用户故事：** 作为一个用户，我想要创建订单并查看订单状态，以便完成商品购买

#### 验收标准

1. WHEN 用户从购物车提交订单，THE 系统 SHALL 创建订单记录，包含商品明细、总金额和收货地址
2. WHEN 订单创建成功，THE 系统 SHALL 返回订单号和支付信息
3. WHEN 用户请求查看订单列表，THE 系统 SHALL 返回该用户的所有订单及其状态
4. WHEN 用户请求查看订单详情，THE 系统 SHALL 返回订单的完整信息，包括商品明细、金额、状态和物流信息
5. WHEN 用户标记订单为已支付，THE 系统 SHALL 更新订单状态为待发货

### 需求 8：商品评价

**用户故事：** 作为一个已购买商品的用户，我想要对商品进行评价，以便帮助其他用户做出购买决策

#### 验收标准

1. WHEN 用户对已完成的订单商品提交评价，THE 系统 SHALL 保存评价内容、评分和评价时间
2. WHEN 用户查看商品详情，THE 系统 SHALL 展示该商品的所有评价
3. WHEN 用户上传评价图片，THE 系统 SHALL 保存图片并关联到评价记录

### 需求 9：宠物社区发帖

**用户故事：** 作为一个用户，我想要在社区发布帖子，以便与其他宠物主人交流

#### 验收标准

1. WHEN 用户提交包含标题、内容和图片的帖子，THE 系统 SHALL 创建新的社区帖子
2. WHEN 用户请求查看社区帖子列表，THE 系统 SHALL 返回分页的帖子列表，按发布时间倒序排列
3. WHEN 用户请求查看帖子详情，THE 系统 SHALL 返回帖子的完整内容和所有评论
4. WHEN 用户删除自己的帖子，THE 系统 SHALL 移除该帖子及其所有评论

### 需求 10：社区互动

**用户故事：** 作为一个用户，我想要评论和点赞社区帖子，以便参与社区互动

#### 验收标准

1. WHEN 用户对帖子提交评论，THE 系统 SHALL 保存评论内容和评论时间
2. WHEN 用户点赞帖子，THE 系统 SHALL 增加该帖子的点赞数
3. WHEN 用户取消点赞，THE 系统 SHALL 减少该帖子的点赞数
4. WHEN 用户查看帖子详情，THE 系统 SHALL 显示该用户是否已点赞该帖子

### 需求 11：店铺管理

**用户故事：** 作为一个店家，我想要创建和管理我的店铺信息，以便展示我的品牌形象

#### 验收标准

1. WHEN 店家提交包含店铺名称、描述、logo和联系方式的表单，THE 系统 SHALL 创建新的店铺
2. WHEN 店家请求查看店铺信息，THE 系统 SHALL 返回店铺的完整信息
3. WHEN 店家提交店铺信息修改，THE 系统 SHALL 更新店铺信息
4. WHEN 用户查看店铺页面，THE 系统 SHALL 展示店铺信息和该店铺的所有商品

### 需求 12：商品管理

**用户故事：** 作为一个店家，我想要添加、编辑和管理我的商品，以便在平台上销售

#### 验收标准

1. WHEN 店家提交包含商品名称、价格、库存、分类、描述和图片的表单，THE 系统 SHALL 创建新的商品
2. WHEN 店家请求查看商品列表，THE 系统 SHALL 返回该店铺的所有商品
3. WHEN 店家提交商品信息修改，THE 系统 SHALL 更新商品信息
4. WHEN 店家将商品状态设置为下架，THE 系统 SHALL 隐藏该商品，使其不在用户端显示
5. WHEN 店家将商品状态设置为上架，THE 系统 SHALL 使该商品在用户端可见

### 需求 13：库存管理

**用户故事：** 作为一个店家，我想要管理商品库存，以便确保库存数据的准确性

#### 验收标准

1. WHEN 店家修改商品库存数量，THE 系统 SHALL 更新商品的库存值
2. WHEN 用户下单，THE 系统 SHALL 减少对应商品的库存数量
3. IF 商品库存为零，THEN THE 系统 SHALL 在商品详情页标记为缺货状态

### 需求 14：订单处理

**用户故事：** 作为一个店家，我想要查看和处理订单，以便及时发货

#### 验收标准

1. WHEN 店家请求查看订单列表，THE 系统 SHALL 返回包含该店铺商品的所有订单
2. WHEN 店家将订单状态更新为已发货，THE 系统 SHALL 更新订单状态并记录发货时间
3. WHEN 店家查看订单详情，THE 系统 SHALL 返回订单的完整信息，包括买家信息和收货地址

### 需求 15：优惠券管理

**用户故事：** 作为一个店家，我想要创建和管理优惠券，以便开展促销活动

#### 验收标准

1. WHEN 店家提交包含优惠券名称、折扣金额、使用条件和有效期的表单，THE 系统 SHALL 创建新的优惠券
2. WHEN 店家请求查看优惠券列表，THE 系统 SHALL 返回该店铺的所有优惠券
3. WHEN 用户在该店铺下单，THE 系统 SHALL 展示可用的优惠券列表
4. WHEN 用户使用优惠券，THE 系统 SHALL 计算折扣后的订单金额

### 需求 16：用户管理（管理员）

**用户故事：** 作为一个管理员，我想要管理平台用户，以便维护平台秩序

#### 验收标准

1. WHEN 管理员请求查看用户列表，THE 系统 SHALL 返回所有用户的基本信息
2. WHEN 管理员搜索用户，THE 系统 SHALL 返回匹配的用户列表
3. WHEN 管理员禁用用户账户，THE 系统 SHALL 阻止该用户登录
4. WHEN 管理员启用用户账户，THE 系统 SHALL 允许该用户正常登录

### 需求 17：店家管理（管理员）

**用户故事：** 作为一个管理员，我想要管理平台店家，以便确保店铺质量

#### 验收标准

1. WHEN 管理员请求查看店家列表，THE 系统 SHALL 返回所有店铺的基本信息
2. WHEN 管理员审核店铺申请，THE 系统 SHALL 更新店铺状态为已审核或已拒绝
3. WHEN 管理员禁用店铺，THE 系统 SHALL 隐藏该店铺的所有商品
4. WHEN 管理员启用店铺，THE 系统 SHALL 恢复该店铺商品的正常展示

### 需求 18：商品审核（管理员）

**用户故事：** 作为一个管理员，我想要审核商品，以便确保商品信息合规

#### 验收标准

1. WHEN 店家提交新商品，THE 系统 SHALL 将商品状态设置为待审核
2. WHEN 管理员请求查看待审核商品列表，THE 系统 SHALL 返回所有待审核的商品
3. WHEN 管理员通过商品审核，THE 系统 SHALL 更新商品状态为已审核，允许上架
4. WHEN 管理员拒绝商品审核，THE 系统 SHALL 更新商品状态为已拒绝，并记录拒绝原因

### 需求 19：社区内容审核（管理员）

**用户故事：** 作为一个管理员，我想要审核社区内容，以便维护社区环境

#### 验收标准

1. WHEN 管理员请求查看社区帖子列表，THE 系统 SHALL 返回所有帖子及其状态
2. WHEN 管理员删除违规帖子，THE 系统 SHALL 移除该帖子及其所有评论
3. WHEN 管理员删除违规评论，THE 系统 SHALL 移除该评论

### 需求 20：数据统计看板（管理员）

**用户故事：** 作为一个管理员，我想要查看平台数据统计，以便了解平台运营状况

#### 验收标准

1. WHEN 管理员请求查看数据看板，THE 系统 SHALL 返回用户总数、店铺总数、商品总数和订单总数
2. WHEN 管理员选择时间范围，THE 系统 SHALL 返回该时间范围内的新增用户数、新增订单数和交易金额
3. WHEN 管理员请求查看商品分类统计，THE 系统 SHALL 返回各分类的商品数量和销售额
