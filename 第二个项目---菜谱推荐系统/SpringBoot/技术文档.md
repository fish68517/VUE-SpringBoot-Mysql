# 智能菜谱推荐系统技术文档

## 1. 引言

### 1.1 项目背景

传统的纸质菜谱管理方式已经无法满足用户快速查找和个性化推荐的需求。因此，开发一款智能菜谱推荐系统，将纸质管理有效实现为在线管理，极大提高工作效率，具有重要的现实意义。

### 1.2 项目目标

设计并开发一个基于 Vue + Spring Boot + MySQL 的智能菜谱推荐系统，实现用户和管理员的角色管理，提供菜谱的浏览、搜索、推荐、评分、评论等功能，并提供后台管理功能，方便管理员对系统进行维护和管理。

## 2. 系统概述

### 2.1 系统功能模块

*   **用户模块：** 登录、注册、个人信息管理、浏览菜谱、搜索菜谱、收藏菜谱、评价菜谱、发表评论等。
*   **管理员模块：** 用户管理、类型管理、菜谱信息管理、评分信息管理、留言信息管理、系统管理等。

### 2.2 技术选型

*   **前端：** Vue.js, Vue Router, Vuex, Axios, Element UI
*   **后端：** Spring Boot, Spring MVC, Mybatis-Plus, MySQL Connector/J
*   **数据库：** MySQL
*   **开发工具：** IntelliJ IDEA, VS Code

## 3. 需求分析

### 3.1 用户角色

*   **用户 (User)：** 可以浏览、搜索、收藏、评价菜谱，发表评论，管理个人信息等。
*   **管理员 (Admin)：** 可以管理用户、类型、菜谱信息、评分信息、留言信息、系统配置等。

## 4. 系统设计

### 4.1 数据库设计

(数据库表结构同之前提供的文档，此处省略)

### 4.2 接口设计

#### 4.2.1 用户相关接口

*   **注册：** `/api/user/register` (POST)
    *   请求参数：`username`, `password`
    *   返回值：JSON 格式，包含 `code`, `message`, `data`
    *   示例代码 (Spring Boot):

        ```java
        @PostMapping("/register")
        public ResultVO register(@RequestBody User user) {
            // 校验用户名是否已存在
            if (userService.getByUsername(user.getUsername()) != null) {
                return ResultVO.error("用户名已存在");
            }
            // 密码加密
            user.setPassword(passwordEncoder.encode(user.getPassword()));
            userService.save(user);
            return ResultVO.success("注册成功");
        }
        ```

*   **登录：** `/api/user/login` (POST)
    *   请求参数：`username`, `password`
    *   返回值：JSON 格式，包含 `code`, `message`, `data` (包含 token)
    *   示例代码 (Spring Boot):

        ```java
        @PostMapping("/login")
        public ResultVO login(@RequestBody User user) {
            User existingUser = userService.getByUsername(user.getUsername());
            if (existingUser == null) {
                return ResultVO.error("用户不存在");
            }
            if (!passwordEncoder.matches(user.getPassword(), existingUser.getPassword())) {
                return ResultVO.error("密码错误");
            }
            // 生成 JWT Token
            String token = jwtUtil.generateToken(existingUser.getUsername());
            Map<String, String> data = new HashMap<>();
            data.put("token", token);
            return ResultVO.success("登录成功", data);
        }
        ```

*   **获取用户信息：** `/api/user/info` (GET)
    *   请求参数：`token` (从请求头中获取)
    *   返回值：JSON 格式，包含 `code`, `message`, `data` (包含用户信息)
    *   示例代码 (Spring Boot):

        ```java
        @GetMapping("/info")
        public ResultVO getUserInfo(@RequestHeader("Authorization") String token) {
            String username = jwtUtil.getUsernameFromToken(token);
            User user = userService.getByUsername(username);
            if (user == null) {
                return ResultVO.error("用户不存在");
            }
            return ResultVO.success("获取成功", user);
        }
        ```

*   **更新用户信息：** `/api/user/update` (PUT)
    *   请求参数：`token` (从请求头中获取), 其他用户信息
    *   返回值：JSON 格式，包含 `code`, `message`
    *   示例代码 (Spring Boot):

        ```java
        @PutMapping("/update")
        public ResultVO updateUserInfo(@RequestHeader("Authorization") String token, @RequestBody User user) {
            String username = jwtUtil.getUsernameFromToken(token);
            User existingUser = userService.getByUsername(username);
            if (existingUser == null) {
                return ResultVO.error("用户不存在");
            }
            // 更新用户信息
            existingUser.setNickname(user.getNickname());
            // ... 其他字段
            userService.update(existingUser);
            return ResultVO.success("更新成功");
        }
        ```

#### 4.2.2 菜谱相关接口

*   **获取菜谱列表：** `/api/recipe/list` (GET)
    *   请求参数：`page`, `size`, `category_id` (可选), `keyword` (可选)
    *   返回值：JSON 格式，包含 `code`, `message`, `data` (包含菜谱列表和分页信息)
    *   示例代码 (Spring Boot):

        ```java
        @GetMapping("/list")
        public ResultVO getRecipeList(@RequestParam(defaultValue = "1") int page,
                                      @RequestParam(defaultValue = "10") int size,
                                      @RequestParam(required = false) Integer categoryId,
                                      @RequestParam(required = false) String keyword) {
            Page<Recipe> recipePage = recipeService.getRecipeList(page, size, categoryId, keyword);
            return ResultVO.success("获取成功", recipePage);
        }
        ```

*   **获取菜谱详情：** `/api/recipe/{id}` (GET)
    *   请求参数：`id` (菜谱 ID)
    *   返回值：JSON 格式，包含 `code`, `message`, `data` (包含菜谱详情)
    *   示例代码 (Spring Boot):

        ```java
        @GetMapping("/{id}")
        public ResultVO getRecipeDetail(@PathVariable int id) {
            Recipe recipe = recipeService.getById(id);
            if (recipe == null) {
                return ResultVO.error("菜谱不存在");
            }
            return ResultVO.success("获取成功", recipe);
        }
        ```

*   **搜索菜谱：** `/api/recipe/search` (GET)
    *   请求参数：`keyword`
    *   返回值：JSON 格式，包含 `code`, `message`, `data` (包含搜索结果列表)

*   **获取推荐菜谱：** `/api/recipe/recommend` (GET)
    *   请求参数：`token` (从请求头中获取)
    *   返回值：JSON 格式，包含 `code`, `message`, `data` (包含推荐菜谱列表)

#### 4.2.3 管理员相关接口

*   **获取用户列表：** `/api/admin/user/list` (GET)
    *   请求参数：`page`, `size`
    *   返回值：JSON 格式，包含 `code`, `message`, `data` (包含用户列表和分页信息)

*   **新增菜谱分类：** `/api/admin/category/add` (POST)
    *   请求参数：`name`, `description`
    *   返回值：JSON 格式，包含 `code`, `message`

*   **更新菜谱信息：** `/api/admin/recipe/update/{id}` (PUT)
    *   请求参数：`id` (菜谱 ID), 其他菜谱信息
    *   返回值：JSON 格式，包含 `code`, `message`

### 4.3 前端代码示例 (Vue)

*   **登录组件：**

    ```vue
    <template>
      <div>
        <el-form :model="loginForm" label-width="80px">
          <el-form-item label="用户名">
            <el-input v-model="loginForm.username"></el-input>
          </el-form-item>
          <el-form-item label="密码">
            <el-input type="password" v-model="loginForm.password"></el-input>
          </el-form-item>
          <el-form-item>
            <el-button type="primary" @click="login">登录</el-button>
          </el-form-item>
        </el-form>
      </div>
    </template>

    <script>
    import axios from 'axios';

    export default {
      data() {
        return {
          loginForm: {
            username: '',
            password: ''
          }
        };
      },
      methods: {
        login() {
          axios.post('/api/user/login', this.loginForm)
            .then(response => {
              if (response.data.code === 200) {
                // 存储 token
                localStorage.setItem('token', response.data.data.token);
                // 跳转页面
                this.$router.push('/home');
              } else {
                this.$message.error(response.data.message);
              }
            });
        }
      }
    };
    </script>
    ```

## 5. 系统实现

### 5.1 后端实现 (Spring Boot)

(具体代码实现涉及较多细节，此处提供关键代码片段)

*   **UserController.java:** (用户相关接口)
*   **RecipeController.java:** (菜谱相关接口)
*   **CategoryController.java:** (分类相关接口)
*   **UserService.java, RecipeService.java, CategoryService.java:** (业务逻辑层)
*   **UserMapper.java, RecipeMapper.java, CategoryMapper.java:** (Mybatis-Plus Mapper 接口)

### 5.2 前端实现 (Vue)

(具体代码实现涉及较多细节，此处提供关键代码片段)

*   **Home.vue:** (首页，展示推荐菜谱)
*   **RecipeList.vue:** (菜谱列表页)
*   **RecipeDetail.vue:** (菜谱详情页)
*   **AdminUserList.vue:** (后台用户管理)

## 6. 总结与展望

本项目成功设计并开发了一个基于 Vue + Spring Boot + MySQL 的智能菜谱推荐系统，实现了用户和管理员的角色管理，提供了菜谱的浏览、搜索、推荐、评分、评论等功能，并提供了后台管理功能。

未来可以进一步优化推荐算法，提高推荐的准确性和个性化程度，增加更多的功能，如语音搜索、智能购物清单等，提升用户体验。